jQuery(function(){$("body").on("click","[data-stopPropagation]",function(e){e.stopPropagation()}),$(".lyear-scroll")[0]&&$(".lyear-scroll").each(function(){new PerfectScrollbar(this,{swipeEasing:!1,suppressScrollX:!0})}),$(document).on("click",".lyear-aside-toggler",function(){$(".lyear-layout-sidebar").toggleClass("lyear-aside-open"),$("body").toggleClass("lyear-layout-sidebar-close"),$(".lyear-mask-modal").length==0?$('<div class="lyear-mask-modal"></div>').prependTo("body"):$(".lyear-mask-modal").remove()}),$(document).on("click",".lyear-mask-modal",function(){$(this).remove(),$(".lyear-layout-sidebar").toggleClass("lyear-aside-open"),$("body").toggleClass("lyear-layout-sidebar-close")}),$(document).on("click",".nav-item-has-subnav > a",function(){$subnavToggle=jQuery(this),$navHasSubnav=$subnavToggle.parent(),$topHasSubNav=$subnavToggle.parents(".nav-item-has-subnav").last(),$subnav=$navHasSubnav.find(".nav-subnav").first(),$viSubHeight=$navHasSubnav.siblings().find(".nav-subnav:visible").outerHeight(),$scrollBox=$(".lyear-layout-sidebar-info"),$navHasSubnav.siblings().find(".nav-subnav:visible").slideUp(500).parent().removeClass("open"),$subnav.slideToggle(300,function(){$navHasSubnav.toggleClass("open");var e=0;pervTotal=$topHasSubNav.prevAll().length,boxHeight=$scrollBox.outerHeight(),innerHeight=$(".sidebar-main").outerHeight(),thisScroll=$scrollBox.scrollTop(),thisSubHeight=$(this).outerHeight(),footHeight=121,footHeight+innerHeight-boxHeight>=pervTotal*48&&(e=pervTotal*48),$subnavToggle.parents(".nav-item-has-subnav").length==1?$scrollBox.animate({scrollTop:e},300):typeof $viSubHeight<"u"&&$viSubHeight!=null?(e=thisScroll+thisSubHeight-$viSubHeight,$scrollBox.animate({scrollTop:e},300)):thisScroll+boxHeight-$scrollBox[0].scrollHeight==0&&(e=thisScroll-thisSubHeight,$scrollBox.animate({scrollTop:e},300))})});var a=$.cookie("the_logo_bg"),t=$.cookie("the_header_bg"),o=$.cookie("the_sidebar_bg");a&&$("body").attr("data-logobg",a),t&&$("body").attr("data-headerbg",t),o&&$("body").attr("data-sidebarbg",o),$(".dropdown-skin :radio").each(function(){var e=$(this),i=e.attr("name");switch(i){case"logo_bg":e.val()==a&&e.prop("checked",!0);break;case"header_bg":e.val()==t&&e.prop("checked",!0);break;case"sidebar_bg":e.val()==o&&e.prop("checked",!0)}}),setTheme=function(e,i){$("input[name='"+e+"']").click(function(){$("body").attr(i,$(this).val()),$.cookie("the_"+e,$(this).val())})},setTheme("sidebar_bg","data-sidebarbg"),setTheme("logo_bg","data-logobg"),setTheme("header_bg","data-headerbg"),$("#iframe-content").multitabs({iframe:!0,refresh:"nav",nav:{backgroundColor:"#ffffff",maxTabs:35},init:[{type:"main",title:$.cookie("_nav_title_")?$.cookie("_nav_title_"):"\u4EEA\u8868\u76D8",url:$.cookie("_nav_url_")?$.cookie("_nav_url_"):"admin/dashboard"}]}),$(document).on("click",".nav-item .multitabs",function(){$(".nav-item").removeClass("active"),$(".nav-subnav li").removeClass("active"),$(this).parent("li").addClass("active"),$(this).parents(".nav-item-has-subnav").addClass("open").first().addClass("active");var e=new Date;e.setTime(e.getTime()+24*60*60*1e3),$.cookie("_nav_url_",$(this).attr("href"),{expires:e}),$.cookie("_nav_title_",$(this).text(),{expires:e})})});
